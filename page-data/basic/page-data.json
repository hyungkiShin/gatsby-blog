{"componentChunkName":"component---src-templates-post-jsx","path":"/basic/","result":{"data":{"site":{"siteMetadata":{"title":"hyungkishin.blog"}},"markdownRemark":{"id":"5bd820f1-3f72-5b9c-a4ec-61e4b07649ac","excerpt":"개념 :) Remote Dictionary Storage 의 약자로 'Redis' 라고 불리운다.  Redis 는 memory 기반의 data 저장소 이다. 메모리에 데이터를 저장하다보니, 빠르다. 단, 휘발성이다. Single Thread - CPU 를 하나만 사용한다. 초당 5 만에서 25만 Request 실행 가능하다. Key-Value 형식으로 데…","html":"<h2>개념 :)</h2>\n<ul>\n<li>Remote Dictionary Storage 의 약자로 'Redis' 라고 불리운다. </li>\n<li>\n<p>Redis 는 memory 기반의 data 저장소 이다.</p>\n<ul>\n<li>메모리에 데이터를 저장하다보니, 빠르다.</li>\n<li>단, 휘발성이다.</li>\n</ul>\n</li>\n<li>Single Thread - CPU 를 하나만 사용한다.</li>\n<li>초당 5 만에서 25만 Request 실행 가능하다.</li>\n<li>Key-Value 형식으로 데이터를 저장한다.</li>\n</ul>\n<h2>장점 : Read/Write 속도</h2>\n<ul>\n<li>Hardware (I/O) 차이에서 오는 기본적인 performance gap 이 좀 있다.</li>\n<li>다양한 Type 의 아키텍쳐를 지원한다. (Single, Master-Slave, Sentinel, Cluster)</li>\n<li>\n<p>Partitioning</p>\n<ul>\n<li>데이터 저장시 여러노드에 분산되어 저장된다</li>\n</ul>\n</li>\n<li>\n<p>Popular</p>\n<ul>\n<li>인기가 많으니 지원하는 라이브러리가 다양하다.</li>\n<li>방대한 커뮤니티.</li>\n</ul>\n</li>\n</ul>\n<h2>단점 : 휘발성</h2>\n<ul>\n<li>AOF, RDB Snapshot 을 통해 Disk 에 저장하여 휘발성 문제를 해소</li>\n<li>Single Thread</li>\n<li>\n<p>Memory Fragmentation</p>\n<ul>\n<li>Fragmentation 이란 : 메모리에 썼다 지웠다 를 반복하다보면 실제로 데이터가 존재하지 않아도 해당 메모리에 데이터가 존재한다고 인식하는 경우, 혹은 그 반대인 경우도 있다.</li>\n<li>주기적으로 Fragmentation 을 지워주는것이 좋다.</li>\n</ul>\n</li>\n<li>\n<p>Big Size Data 에 적합하지 않다.</p>\n<ul>\n<li>휘발성 이라는 문제를 해소하기 위해서 Disk 에서 memory 에 있는 데이터를 읽거나, 변경된 부분에 대해서 Disk 에 쓰게 되는데.</li>\n<li>데이터가 너무 많이 들어가 있게 되면 Disk 에 쓰는 시간이 오래걸리게 된다</li>\n<li>오래 걸리면 Replication 이랑 Sync 가 안맞는 문제가 생길수도 있다.</li>\n<li>해당 요청으로 다른 요청이 대기를 하고 있는 상황이 벌어질 수 있다.</li>\n<li>디스크에 쓰는 양을 줄이기 위해서 다양한 옵션들을 설정하기도 하지만 기본적으로 너무 많은 데이터를 넣은 것은 (일반적으로) 적합하지 않다.</li>\n</ul>\n</li>\n</ul>\n<h2>목적 : Cashing</h2>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 1rem;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/dcc451b14686f8505937677ae7d0fcd2/9d8cf/img.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 41.1764705882353%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABY0lEQVR42k1Ry07EMAzs//8UIKQ9cQAhYNWFLn2lbRLnne7CZZCzrcTB0tgev8aVTyviei2mjMfbxwl7LF1+CmYL+VJsx3HDOzfkG66sj2i7Aco42BBxbvtCOHcD6tMnXEylwXvdoOlEaaStxyQ1XMwwLqIbRpALhVcxeD/WkNrg63vA/eMTJFnMSuP55RWLIviU8fpR49S0CGlFO044Nj1sSJDkcHeoMS4Wab2g4jV5Yr7+ou0FHh4PMNu0WZtStHOMjyXOS/DQ/eRZ83V5OznmQuJCNi606Za8abjrdoX/pxv7btOTT+c+peGiNBQR2q7HKCaEmCCVhnEOmgxmqUDWwYUAz3qmDOs8nA+IeYX1Hv0wYl4kfMyoNBGmaYIQE+Z5hrEWRAQyBqMQEEKAOXtcKQWtdcEppZKTUsI6HhpRsV5kPRTZ7aNr8SUZjNNSvs8P4+fsPPZ5m7ReS5x91pQ1/gPlclzExP5toQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img.png' title='' src='/static/dcc451b14686f8505937677ae7d0fcd2/ca1dc/img.png' srcset='/static/dcc451b14686f8505937677ae7d0fcd2/e7570/img.png 170w,\n/static/dcc451b14686f8505937677ae7d0fcd2/f46e7/img.png 340w,\n/static/dcc451b14686f8505937677ae7d0fcd2/ca1dc/img.png 680w,\n/static/dcc451b14686f8505937677ae7d0fcd2/02d09/img.png 1020w,\n/static/dcc451b14686f8505937677ae7d0fcd2/9d8cf/img.png 1216w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>img.png</figcaption>\n  </figure></p>\n<blockquote>\n<p>자주 (사용되고, 반복되고) 빠르게 응답해야 되는것들 을 미리 준비해 두는것.</p>\n</blockquote>\n<h2>일반적 사용 : Session Store, List Data Caching</h2>\n<ul>\n<li>List 형태의 데이터의 경우 일반 SQL 서버보다 약 10 배 이상의 성능을 낸다고 알려져있다.</li>\n</ul>\n<h2>Redis 구조</h2>\n<p>Redis 는 크게 4가지의 구조로 볼 수 있다.</p>\n<ul>\n<li>Stand Alone (레디스 한대만 가지고 사용)</li>\n<li>\n<p>Master-Replica (Master 와 read 용 Replica 를 두는 경우)</p>\n<ul>\n<li>Master 에서 데이터가 변경이 되면 Replica 가 Master 와 데이터 차이를 확인후 똑같이 복사한다.</li>\n<li>구성하는것에 따라 Sentinel 과 비슷할 수 도 있다.</li>\n<li>\n<p>앞단에 벨런서가 있다고 치고, heart Beat 을 감시해서 master 가 죽으면 스크립트를 실행해서 임의로 Replica 를 master 로 승격 시킬 수 있다.</p>\n<ul>\n<li>이게 자동화 된게 sentinel 이다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Sentinel</p>\n<ul>\n<li>모니터링 툴이다.</li>\n<li>Master 가 죽으면 Replica 를 Master 로 승격시킨다.</li>\n<li>Master 를 ( 사람이 ) 복구 하면 기존 Master 역할 하던 친구는 Replica 가 된다.</li>\n<li>보통 Master 와 Replica 는 서로 다른 존에 두는것이 좋다. ( 재난, 화재 등 ..)</li>\n</ul>\n</li>\n<li>\n<p>Cluster</p>\n<ul>\n<li>복수개의 Master 와 복수개의 Replica 가 있는 형태이다.</li>\n<li>기존 3 대 가 있어야 하고, Replica 가 따로 붙는 형태.</li>\n<li>sentinel 이라는것을 따로 두지 않아도 장애상황시 자동으로 상호 보완 한다.</li>\n<li>샤딩한다.</li>\n<li>임의로 데이터를 나눈다.</li>\n<li>성능면으로 좀더 좋다</li>\n</ul>\n</li>\n</ul>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 1rem;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 673px; '>\n      <a class='gatsby-resp-image-link' href='/static/45a3310a1a2983ae7207cfe8ff4f4f98/60e44/img_1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 65.88235294117646%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACt0lEQVR42j2TWa/jRBCF83P5MUiIl3kAwRXMwBUS2/AAYpHQSPA0mtwbcpcsjpe4bbeX9hYn8ZoPdWfgoSW76lSp6pw6s0idEVlPWIwEskGIkn3SIrKOqBgQaiAuJ7K6xxUVQXzCTzsCNRBmPSJqEGlnekTFyCxIO9Kyp5pg+9uvvPv0BfdbH8uVVGdIq9EUFhPMv75lefuSpRXgJjXOX38zf/ERSyvE3sfI8sIsykeSciSrR1Q14EcVtsjJDhPqoHMDUT6gmgt+dMT2Yna+MlvYfslmK9h6GZaX4icdM10UqR5ZTqy9nLtnwd3jnicrJiwGs0ZajxTHyWDi8sJyI5k/+jxYCW+XLmtXoQeLy5GZBlbnC3ULRdOT1S3q0JM3A/X5QnWeKE8TxfH6XbcXg1N1S37oyOqO8jiYeHWamAVJg5BHgvQ/ISairCNMz/+TnVQTSdHiy6PhUwticPlosPpfpANSTxiokXcff8jyzzfcrTzCauThi89Z/vSaf3YBTlAgNc9nuL/5jMWPP7DYBgRFx/aXn1m8vGFpSxw/vYoS5iNSFtiexBE5sWpx7ICNJbC82DTUosQ1SD/BWjtsvQQvPrLb+Dwvnlk7EtuPzYazUI3kp4shPi4H5uKEKAeKZiRUHUnVE6qetIOH21csvv+O+80eUbRs//id+c0nLO0Iy42MYKahVjqvR2x55oPXHm+sA6rUnAzkzfR+wguRJ7FWNmsnwpUHdlvBykwYs9snhvNZqK5FWjE7Knn1NmTuFkTZwSioc2bCFh6/+pL7b7/hbuVeOXxvhIWmxxHmrGZSW06Nxl660PEydvvCJPXTCspiMIe+j46s7YS1o1i5FU+bhKd1wMpRJraP2+sdGldoJ8QHHq2QlS2Jyw51uOby42QOW2P0S6uBjZvwZIXIvDMu07G8GfkXmenCsecTATYAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img.png' title='' src='/static/45a3310a1a2983ae7207cfe8ff4f4f98/60e44/img_1.png' srcset='/static/45a3310a1a2983ae7207cfe8ff4f4f98/e7570/img_1.png 170w,\n/static/45a3310a1a2983ae7207cfe8ff4f4f98/f46e7/img_1.png 340w,\n/static/45a3310a1a2983ae7207cfe8ff4f4f98/60e44/img_1.png 673w' sizes='(max-width: 673px) 100vw, 673px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>img.png</figcaption>\n  </figure></p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 1rem;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 371px; '>\n      <a class='gatsby-resp-image-link' href='/static/24e3e5bb5036c4e76e7a066c5abea6b6/d86da/img_2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 70.58823529411764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB50lEQVR42p1T2VLiUBDl//9rSkstmUIxELKQ7WbfwzYKZ+r0DSCWDzM+dHK7ctN9lu5Jsz0hynu4QQ7LS7GwFQw7gioG1JsjquHjn4P3J+0O8FSJ55mJ6auF+6dXPP5ewFzHGP4A7f6Edqej20OC5/5wPetvJ12QCInGCQs4QQGVd4jLAZafwnQTQeyGBVbrFAsnxtKNYfsZ5maApaPgqVr+tbzsWjCptrCDHLafI0hbyVmM+TqqEGadBHM3LBEXgxRgI95XeQ8/aXRBPgiZ9EhDU4RQ4Ln7RLk/aNrNF/oEdUM5a/ZCm5E3B8kZZf/+M1OcIMfdaMbzywp3T3M8TA14qtLGjKILohGZPo/o90R5vCJM6x3CtEOQaD2irBOx/bgRbagTtWQD5mtVaf2SFnG5kbtZvRfqUpCCv61CGFYEL67F7YUdwXRjrLxUfmBOZ/mNjr8YrnxnA75ZmNpOquEodDbvuMzWmV73zQx231HefaHM6qRAU0g/bw+oei30/xgjBdmJK/frYYbHqSHmzAxXOp5Rkkq7PY/T7YacDeP7BiHR0Rg/ri8DS724BdQ4GofXGw3hWe6PJvHOZWyYUHw3KmFYoRhEV9+sEHPT1xuUtLJNS1vBdJSwYvMV19MKsQ5zNJsP/AU7GCGuF/4FqQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img_1.png' title='' src='/static/24e3e5bb5036c4e76e7a066c5abea6b6/d86da/img_2.png' srcset='/static/24e3e5bb5036c4e76e7a066c5abea6b6/e7570/img_2.png 170w,\n/static/24e3e5bb5036c4e76e7a066c5abea6b6/f46e7/img_2.png 340w,\n/static/24e3e5bb5036c4e76e7a066c5abea6b6/d86da/img_2.png 371w' sizes='(max-width: 371px) 100vw, 371px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>img_1.png</figcaption>\n  </figure></p>\n<h2>어떤 Redis 구조가 적절한가</h2>\n<ul>\n<li>사전에 정의한 품질 요건에 따라 다르다.</li>\n</ul>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 1rem;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 430px; '>\n      <a class='gatsby-resp-image-link' href='/static/934e90c78648bb60fab2661b256106c6/bc750/img_3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 64.70588235294117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABtklEQVR42oVS13LbQAzU/39YZjKeSIooib2TOvZitlHdDECKoezYedjjAbzbA3axKrs7vKiC6SUwvASqdUKYNHDCAqafwnBj0BlC0d5QEqb4JT/tV7RoToTfR4vxa6dBdyLYQcbkshHywXp4MKp+BO+nHGEmJHa6bAUpgriCyBvobgTdjWH5KSw/gR3mHB+NEIp54odUc8RR97k7emSuULUE3jYKV7c9WNjsTexkB2tJx/Zo8aWfaxnbg4nN3uA4LgfERY8o7xAV/WvLVU8aXFG0I+rhhuz9jLQ+I28unMveL6j6O5NQftn+s7q5ZdkM55d3ss1fO8y4Yoo3ko4fbxKfocrqASjahTEfTbGCjMUnLTRbsF6uKKE7MTvNXy+BH9dc6UeXl1hRuaShOolNDhMoR2PEbtsCIm/RXoCyu31PSEtzfqC7gi+0l8diRO7ziBBR0X5PNhNKioP1ToNsBNAcgby5vgj+JP5L/h9CaumgeWyGYoY4ZS2LL7JuHI8JIu/5H7m8dPaThqSZZkcsPA2uQoNrCexVD6Y7GkV6SrLD5oVp8zXhOIePf+I5a/XwCpLgq5b/AKHO1Cqk+QhrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img_2.png' title='' src='/static/934e90c78648bb60fab2661b256106c6/bc750/img_3.png' srcset='/static/934e90c78648bb60fab2661b256106c6/e7570/img_3.png 170w,\n/static/934e90c78648bb60fab2661b256106c6/f46e7/img_3.png 340w,\n/static/934e90c78648bb60fab2661b256106c6/bc750/img_3.png 430w' sizes='(max-width: 430px) 100vw, 430px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>img_2.png</figcaption>\n  </figure></p>\n<hr>\n<h2>실습</h2>","frontmatter":{"title":"Redis","date":"April 02, 2024","update":"April 02, 2024","tags":["Redis"],"series":null},"fields":{"slug":"/basic/","readingTime":{"minutes":2.285}}},"seriesList":{"edges":[{"node":{"id":"af3fecac-0e35-5a3b-9c60-a1611cbdd99b","fields":{"slug":"/deploy-strategy/"},"frontmatter":{"title":"배포전략"}}},{"node":{"id":"f9e34e11-b76c-54e3-b560-d958018384a2","fields":{"slug":"/cpu-bound-vs-io-bound/"},"frontmatter":{"title":"CPU Bound 와 IO Bound"}}},{"node":{"id":"1684f838-f072-51c6-8c81-e65cfb96f022","fields":{"slug":"/kotlin/"},"frontmatter":{"title":"코틀린의 현재와 미래"}}},{"node":{"id":"5bd820f1-3f72-5b9c-a4ec-61e4b07649ac","fields":{"slug":"/basic/"},"frontmatter":{"title":"Redis"}}}]},"previous":{"fields":{"slug":"/kotlin/"},"frontmatter":{"title":"코틀린의 현재와 미래"}},"next":null},"pageContext":{"id":"5bd820f1-3f72-5b9c-a4ec-61e4b07649ac","series":null,"previousPostId":"1684f838-f072-51c6-8c81-e65cfb96f022","nextPostId":null}},"staticQueryHashes":[],"slicesMap":{}}